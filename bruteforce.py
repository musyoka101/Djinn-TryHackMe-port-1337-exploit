#!/bin/env python3
import socket
import re
import sys

class bcolors:
    OKBLUE = '\033[94m'
    OKGREEN = '\033[92m'
    FAIL = '\033[91m'
    WARNING = '\033[93m'
    ORANGE='\033[33m'
    darkgrey='\033[37m'
    ENDC = '\033[0m'
try:
	host = sys.argv[1]
	port = 1337
	
	client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
	connection = client_socket.connect((host, port))
	banner = client_socket.recv(1024).decode()
	print (bcolors.darkgrey + banner + bcolors.ENDC)
	welcome = client_socket.recv(1024).decode()
	print (welcome)
	mess = re.search("\((.*?)\)", welcome).group(1)
	mess = mess.replace(",", "")
	mess = eval(mess.replace("'", ""))
	print (mess)
	client_socket.send(str(mess) + "\n")
	#question two different output logic
	print
	for i in range (1000):
		
		print (bcolors.OKGREEN + "[+] Calculations already done:" + bcolors.ENDC + bcolors.OKBLUE + " {number}".format(number=i) + bcolors.ENDC)
		nextq = client_socket.recv(1024).decode()
		nextq += client_socket.recv(1024).decode().strip()
		#print (nextq)
		answer = re.search("\((.*?)\)", nextq).group(1)
		answer = answer.replace(",", "")
		print (bcolors.OKGREEN + "[+] The Probem we are supposed to solve: " + bcolors.ENDC+ bcolors.ORANGE + str(answer) + bcolors.ENDC)
		answer = eval(answer.replace("'", ""))
		print (bcolors.OKGREEN + "[+] The answer for the calculation is: " + bcolors.ENDC + bcolors.FAIL + str(answer) + bcolors.ENDC)
		print (bcolors.WARNING + "[+] Sending answer........." + bcolors.ENDC)
		client_socket.send(str(answer) + "\n")
		print
		gift = client_socket.recv(1024).decode()
		print (bcolors.WARNING + gift + bcolors.ENDC)
		print ("Done!!!!!")
except:
	print (bcolors.ORANGE + "An Error Occured\n\nUsage:\n\npython bruteforce.py <IP address>\n\n\nExiting......." + bcolors.ENDC)
